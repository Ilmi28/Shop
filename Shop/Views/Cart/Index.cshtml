@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    float sum = 0;
    int counter = 0;
}
<h1 class="display-5">Your cart: </h1>
<hr />
<br />
@if(Model.Count == 0)
{
    <h1 class="text-muted">Your cart is empty</h1>
}
else{
    <ul>
    @foreach(var cartItem in Model){
        <li class="cart-item-block">
            <div class="cart-item-photo-block"><img class="cart-item-img" src="~/img/monitorImages/@cartItem.Photo"></div>
            <h2 class="cart-item-name">@cartItem.Name</h2>
            <p class="cart-item-price">Price: @(cartItem.Price)$</p>
            <ul class="cart-amount-bar">
                <a asp-controller="Cart" id="cart-minus-btn-link-@counter" asp-action="SubstractCartProduct" asp-route-id="@cartItem.Id" >
                    <li id="cart-minus-btn-@counter" class="btn btn-dark">-</li>
                </a>
                <li id="cart-quantity-@counter" value="@cartItem.Quantity">@cartItem.Quantity</li>
                <a asp-controller="Cart" id="cart-plus-btn-link-@counter" asp-action="AddCartProduct" asp-route-id="@cartItem.Id">
                    <li id="cart-plus-btn-@counter" class="btn btn-dark">+</li>
                </a>
            </ul>
            <a asp-controller="Cart" asp-action="Delete" asp-route-id="@cartItem.Id"><button class="btn btn-danger cart-delete-item-btn"><i class="bi bi-trash-fill"></i></button></a>
        </li>
        <script>
            var cartPlusBtn_@counter = document.getElementById("cart-plus-btn-@counter");
            var cartPlusBtnLink_@counter = document.getElementById("cart-plus-btn-link-@counter");
            var cartQuantity_@counter = document.getElementById("cart-quantity-@counter");
            var cartMinusBtn_@counter = document.getElementById("cart-minus-btn-@counter");
            var cartMinusBtnLink_@counter = document.getElementById("cart-minus-btn-link-@counter");

            if (cartQuantity_@counter .value == 1) {
                cartMinusBtn_@counter .classList.add("disabled");
                cartMinusBtnLink_@counter .style.pointerEvents = "none";
            }
            if (cartQuantity_@counter .value == 30) {
                cartPlusBtn_@counter .classList.add("disabled");
                cartPlusBtnLink_@counter .style.pointerEvents = "none";
            }

            </script>
            sum += cartItem.Price * cartItem.Quantity;
            counter++;
        }
    </ul>
    <h4 class="total-sum">Total : @(Math.Round(sum, 2))$</h4>
}